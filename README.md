## Структура проекта:
app (основное приложение)
  app/__init__.py: Файл, который инициализирует FastAPI и Tortoise ORM. В этом файле происходит регистрация моделей и настройка подключения к базе данных.
  app/app_main.py: Главный файл FastAPI, в котором создается экземпляр FastAPI, регистрируются маршруты и устанавливаются обработчики событий (startup и shutdown). Также здесь настраивается подключение к базе данных с использованием Tortoise ORM.
  app/app_api.py: Основные API маршруты для работы с товарами.
  app/app_services.py: Сервисы для выполнения бизнес-логики, такие как создание пользователя и получение списка продуктов.
  app/app_models.py: Определение моделей данных для пользователей и продуктов.
  app/cart: (корзина) для определения классов ShoppingCart и Product.
  app/cart_routes: код для маршрутов корзины.
  app/auth: вложенная папка:
     app/auth/auth_api.py: API маршруты для регистрации и аутентификации  пользователей.
     app/auth/auth_services.py: Сервисы для аутентификации и получения текущего пользователя.
     app/auth/auth_models.py: Модели данных, связанные с аутентификацией (например, токены).
test_main.py: Тесты для регистрации пользователя и получения продуктов.
settings.py: Настройки проекта, такие как строка подключения к базе данных.
.env: файл с личными настройками (не подгружается в репозиторий Git).
.env.sample: описание личных настроек.
requirements: фреймворки для установки в виртуальное окружение.
.aerich.ini: файл с настройками [alembic] [generator] [postgresql] (не подгружается в репозиторий Git).
__init__.py
__main__.py.py
migrations: папка с миграциями моделей и БД при помощи aerich.
pyproject.toml
tortoise_config.py
README.md: описание проекта.

## Виртуальное окружение
(venv) gretaabraamyan@MacBook-Air Diplomny_project % pip list
Package              Version
-------------------- ------------
aiofiles             0.5.0
aiomysql             0.2.0
aiosqlite            0.16.1
aniso8601            7.0.0
annotated-types      0.6.0
anyio                3.7.1
asgiref              3.7.2
async-exit-stack     1.0.1
async-generator      1.10
atlastk              0.13.3
blinker              1.7.0
certifi              2023.11.17
charset-normalizer   3.3.2
ciso8601             2.3.1
click                8.1.7
dnspython            2.4.2
ecdsa                0.18.0
email-validator      2.1.0.post1
exceptiongroup       1.2.0
fastapi              0.104.1
Flask                3.0.0
graphene             2.1.9
graphql-core         2.3.2
graphql-relay        2.0.1
h11                  0.14.0
httpcore             1.0.2
httptools            0.6.1
httpx                0.25.2
idna                 3.6
importlib-metadata   6.8.0
iniconfig            2.0.0
iso8601              1.1.0
itsdangerous         2.1.2
Jinja2               3.1.2
jose                 1.0.0
MarkupSafe           2.1.3
orjson               3.9.10
packaging            23.2
passlib              1.7.4
pip                  23.3.1
pluggy               1.3.0
promise              2.3
psycopg2             2.9.9
pyasn1               0.5.1
pydantic             2.5.2
pydantic_core        2.14.5
pydantic-extra-types 2.1.0
pydantic-settings    2.1.0
PyJWT                2.8.0
PyMySQL              1.1.0
PyPika               0.48.9
pypika-tortoise      0.1.6
pytest               7.4.3
pytest-asyncio       0.21.1
python-dotenv        1.0.0
python-jose          3.3.0
python-multipart     0.0.6
pytz                 2020.5
PyYAML               6.0.1
requests             2.31.0
rsa                  4.9
Rx                   1.6.3
setuptools           65.5.1
six                  1.16.0
sniffio              1.3.0
starlette            0.27.0
tomli                2.0.1
tortoise             0.1.1
tortoise-orm         0.20.0
typing_extensions    4.8.0
ujson                5.8.0
urllib3              2.1.0
uvicorn              0.24.0.post1
uvloop               0.19.0
watchfiles           0.21.0
watchgod             0.8.2
websockets           12.0
Werkzeug             3.0.1
wheel                0.38.4
zipp                 3.17.0


## ЗАДАЧА НА ДИПЛОМНЫЙ ПРОЕКТ

## Cервис покупки товаров для авторизованных пользователей

Реализация:
FastAPI backend на Python. В качестве БД использовать PostgreSQL.
FastAPI - Использовать для реализации фреймворк FastAPI
ORM - Использование специальной библиотеки для работы с СУБД, без написания SQL запросов вручную
Tortoise - В качестве ORM необходимо использовать Tortoise ORM
Git - Использовать для хранения исходного кода один из удаленных Git репозиториев
Swagger - Для API серверов реализовать доступ к автогенерируемой документации
Redme - Описать документацию в файле Readme в корне проекта
PEP8 - Следовать рекомендациям PEP8

Требуемый функционал
Регистрация: ФИО, email (уникальный), телефон (уникальный), пароль, подтверждение пароля. Все поля обязательны.
Пароль должен быть не менее 8 символов, только латиница, минимум 1 символ верхнего регистра, минимум 1 спец символ $%&!:. Телефон должен удовлетворять маске: начинаться с +7 после чего идет 10 цифр.
Авторизация: email или телефон (одно поле), пароль. Для авторизованных пользователей доступна таблица товаров, где выводится список всех активных товаров в базе данных
Товар : имя(строка), цена(целое), созданное_at(дата-время), обновленное_at(дата-время), is_active(bool)

Доп. задача:
Должен быть реализован объект Корзина (list[Товар]), в котором можно через getter получить общую стоимость корзины, реализовать методы добавления (одного или нескольких, используя @overload), удаления товара\полную очистку. Вывод корзины и работу с ней реализовывать не обязательно, достаточно только класса
Методы доступные неавторизованным пользователям:
регистрация, авторизация При попытке получить данные без доступа выводить ошибку {code: 401, message:”Unauthorized”}, с HTTP statuscode 401
Методы доступные авторизованным пользователям: список пагинированных товаров

Желательно использовать асинхронность

Идентификация пользователя должна происходить по Bearer токену или JWT.

Условия приемки
код размещен в открытом репозитории
код покрыт тестами минимум на 75%
код оформлен согласно pep8
оформлен Readme файл



## Инструкция по работе над дипломным проектом

Неделя 1
Посмотреть урок по профориентации и определиться с направлением, в котором хочется развиваться.
Изучить проекты из хаба ориентируясь на направление и стек.
Выбрать проект и сообщить куратору, чтобы зафиксировать за вами конкретный проект. Важно: над одним проектом могут работать на больше 3-х человек из группы.
Декомпозировать проект на задачи и составить план работы.
Результат первой недели:
[ ] подробный план работы над проектом
[ ] репозиторий в Github со структурой проекта

Неделя 2
Реализовать функционал проекта.
Протестировать проект.
Прийти на консультацию по диплому и задать вопросы, которые возникли в процессе работы над проектом.
Оформить драфт презентации к защите проекта.
Результат второй недели:
[ ] оформлен Github с решением проекта и сдан наставнику
[ ] составлена структура презентация для защиты проекта

Неделя 3
Внести все правки и завершить проект.
Подготовить проект для финальной защиты.
Презентовать дипломный проект и защитить свое решение.
Результат третьей недели:
[ ] дипломный проект готов и сдан наставнику
[ ] защита проекта успешно пройдена

Защита проекта
Защита будет проходить на всю группу по следующему сценарию (10-12 мин на человека):
1.[до 2 минут] Описать проблему, которая была выбрана для решения и целевой концепт решений. Другими словами показываем выжимки из ТЗ и комментируем кратко основные тезисы.
2.[до 2 минут] Рассказать какая версия продукта была выбрана и почему. Рассказать что получилось сделать с описанием решений проблем.
3.[до 5 минут] Техническая часть описания, какой был выбран стек, комментарии по архитектуре и тп. Продемонстрировать решение, с пояснениями по функциональностям.
4.Продемонстрировать результаты тестирования проекта.
5.[до 3 минут] Сессия вопросы-ответы по проекту.

Рекомендация: используйте технику STAR при презентации своего проекта. 
Эту технику часто используют рекрутеры для оценки кандидатов, поэтому убедитесь, что в вашей презентации есть все 4 ключевых элемента:
S(situation) — описана ситуация
T(target) — сформулирована стоящую перед вами задача
A(action) — обозначены ваши действия для решения этой задачи
R(result) — рассказано о результате









#############################################################################################################

# Сервис почтовых рассылок

## Описание
Данный проект организует и автоматизирует процесс создания и управления информационными рассылками, с целью привлечения новых клиентов.
Разработан с использованием фреймворка Django и языка программирования Python

## Регистрация и аутентификация
Пользователи могут безопасно и просто зарегистрироваться на платформе, гарантированно подтверждая свою уникальность через электронную почту. Это обеспечивает надежную идентификацию пользователей и сохранность их данных. Для обеспечения безопасности и уникальности аккаунтов, после регистрации отправляется подтверждение на указанный email, который пользователь должен подтвердить, прежде чем получить полный доступ к платформе.
Создание персонализированных рассылок: Платформа предоставляет пользователям удобные инструменты для создания персонализированных рассылок. Пользователи сами выбирают, кому, когда и с каким содержанием будут отправлены электронные письма. В любой момент пользователь в праве удалить или завершить собственную рассылку.
Работа с клиентской базой: Платформа предоставляет удобные инструменты для эффективного управления клиентской базой. Пользователи могут добавлять, редактировать и обновлять информацию о клиентах, обеспечивая актуальность данных.
Модерация и контроль: Команда модераторов внимательно следит за качеством и соответствием контента на платформе. Модераторы проверяют рассылки и гарантируют, что они соответствуют тематике и не содержат недопустимого контента.
Блог и информационные материалы: Блог-модератор регулярно обновляет платформу интересными и полезными статьями, следит за актуальностью контента и обогащаем платформу информацией, которая поможет быть в курсе последних тенденций.

## Программные требования
Установите пакеты из файла requirements.txt с помощью команды: 
pip install -r requirements.txt 
и настройте виртуальное окружение командой: 
source venv/Scripts/activate

## Выполните личные (конфиденциальные) настройки
Создайте в корне проекта файл конфигурации .env со своими личными настройками по шаблону, указанному в .env.sample. 
Заполните файл согласно вашим личным данным.
Создайте "вручную" базу данных в postgresql, при этом имя файла базы данных должно совпадать с именем, указанным в файле .env.

## Пресеты
Откройте терминал и выполните следующие команды для очистки таблицы ContentType и заполнения базы данных: python manage.py shell
В интерактивной оболочке Python выполните: from django.contrib.contenttypes.models import ContentType и ContentType.objects.all().delete()
В терминале введите команду, которая заполнит базу данных данными, необходимымы для вашего проекта: python manage.py fill
Создайте суперпользователя, который будет иметь доступ к административной панели Django, с помощью команды: python manage.py csu
Активировать Crontab на вашем сервере для выполнение регулярных задач в автоматическом режиме с помощью команды: python run_cron.py
Активировать Redis на вашем сервере для кэширования и хранения данных с помощью команд: brew services start redis и redis-server
Откройте терминал и выполните команду для отчистки кэша: python manage.py clear_cache
Во время разработки, после добавления или изменения данных, рекомендуется выполнить отчистку кэша для обновления результатов.
Выполните команду: python manage.py crontab add, чтобы Django-приложение смогло найти модуль 'crontab' и обрабатывать периодические задачи с использованием django_crontab. 
Создайте миграции базы данных командой: python manage.py migrate.

## Запуск
Запустите проект командой: python manage.py runserver во втором окне терминала (чтобы не останавливать сервер Redis).
Переходите по ссылке: http://127.0.0.1:8000/ и начинайте использование проекта (заполнение рассылок, блогов,клиентов и т.д., отправку писем, получение статистики)
Проведите тестирование различных функциональностей вашего проекта, чтобы удостовериться, что они работают как ожидалось.

## РАСПРЕДЕЛЕНИЕ РОЛЕЙ
Пользователь (г. service_users): Пользователи, работающие с рассылками, представляют собой обычных зарегистрированных пользователей платформы. Пользователи могут создавать рассылки, определяя получателей, текст сообщения и настройки отправки. Для удобства работы с рассылками, у каждого пользователя есть личный кабинет, где можно редактировать и удалять рассылки, а также отслеживать их статус и время следующей отправки.
Группа service_users присваивается любому пользователю после регистрации
Менеджер (г. manager): Менеджеры, также называемые модераторами, назначаются администраторами. Их основная задача - контроль за созданными рассылками пользователями и обеспечение их соответствия правилам и качеству. Менеджеры могут удалять или завершать рассылки. Так же блокировать некоторых пользователей.
Группу manager необходимо устанавливать через административную панель Django
Блог-Менеджер (г. blog_manager): Блог-модераторы также назначаются администраторами. Их обязанность - создавать и управлять контентом блога, предоставляя полезные статьи и материалы для пользователей. Блог-модераторы следят за актуальностью и качеством контента на платформе, участвуют в формировании образа сообщества и информационной политики.
Группу blog_manager необходимо устанавливать через административную панель Django

## УСТАНОВКА РОЛИ ПОЛЬЗОВАТЕЛЮ
Авторизация в административной панели: Войдите в административную панель вашего Django проекта, перейдя по URL-адресу, обычно http://127.0.0.1:8000/admin/, и введите свои учетные данные администратора.
Навигация к пользователям: В административной панели найдите раздел, связанный с управлением пользователями.
Выбор пользователя: Найдите пользователя, которому вы хотите присвоить определенную группу, и выберите его, нажав на его данные.
Редактирование пользователя: В открывшейся странице редактирования пользователя вы должны найти раздел "Группы" который позволяет управлять группами пользователя.
Выбор группы: В этом разделе вы увидите список доступных групп. Выберите группу, которую вы хотите присвоить пользователю.
Сохранение изменений: После выбора группы, убедитесь, что сохраните изменения, нажав на соответствующую кнопку "Сохранить".
